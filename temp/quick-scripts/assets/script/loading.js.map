{"version":3,"sources":["loading.js"],"names":["cc","Class","extends","Component","properties","load","Node","broadcostTimes","doCountdownTime","console","log","loadOver","director","loadScene","start","schedule","animationComponent","getComponent","Animation","play","loader","downloader","loadSubpackage","err","error","find"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,cAAML,GAAGM,IADD;AAERC,wBAAgB;AAFR,KAHP;;AAQL;;AAEA;AACAC,mBAXK,6BAWY;AACb,aAAKD,cAAL,IAAuB,CAAvB;AACAE,gBAAQC,GAAR,CAAY,KAAKH,cAAjB;AACA,YAAG,KAAKA,cAAL,IAAuB,CAAvB,IAA4B,KAAKI,QAApC,EAA6C;AACzCX,eAAGY,QAAH,CAAYC,SAAZ,CAAsB,OAAtB;AACH;AACJ,KAjBI;AAmBLC,SAnBK,mBAmBI;AACL,aAAKC,QAAL,CAAc,KAAKP,eAAnB,EAAmC,CAAnC;AACA,YAAIQ,qBAAqB,KAAKX,IAAL,CAAUY,YAAV,CAAuBjB,GAAGkB,SAA1B,CAAzB;AACAF,2BAAmBG,IAAnB,CAAwB,SAAxB;;AAEAnB,WAAGoB,MAAH,CAAUC,UAAV,CAAqBC,cAArB,CAAoC,KAApC,EAA2C,UAAUC,GAAV,EAAe;AACtD,gBAAIA,GAAJ,EAAS;AACLd,wBAAQC,GAAR,CAAY,yBAAZ;AACA,uBAAOD,QAAQe,KAAR,CAAcD,GAAd,CAAP;AACD;AACDd,oBAAQC,GAAR,CAAY,wBAAZ;AACAV,eAAGoB,MAAH,CAAUC,UAAV,CAAqBC,cAArB,CAAoC,OAApC,EAA6C,UAAUC,GAAV,EAAe;AAC1D,oBAAIA,GAAJ,EAAS;AACLd,4BAAQC,GAAR,CAAY,yBAAZ;AACA,2BAAOD,QAAQe,KAAR,CAAcD,GAAd,CAAP;AACD;AACDvB,mBAAGyB,IAAH,CAAQ,QAAR,EAAkBR,YAAlB,CAA+B,SAA/B,EAA0CN,QAA1C,GAAqD,IAArD;AACAF,wBAAQC,GAAR,CAAY,0BAAZ;AACD,aAPH;AAQD,SAdL;AAgBH;AAxCI,CAAT","file":"loading.js","sourceRoot":"../../../../assets/script","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        load: cc.Node,\n        broadcostTimes: 2,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    //倒计时\n    doCountdownTime(){\n        this.broadcostTimes -= 1;\n        console.log(this.broadcostTimes);\n        if(this.broadcostTimes <= 0 && this.loadOver){\n            cc.director.loadScene(\"start\"); \n        }\n    },\n\n    start () {\n        this.schedule(this.doCountdownTime,1);\n        let animationComponent = this.load.getComponent(cc.Animation);\n        animationComponent.play(\"loading\");\n\n        cc.loader.downloader.loadSubpackage('img', function (err) {\n            if (err) {\n                console.log('load subpackage failed.');\n                return console.error(err);\n              }\n              console.log('load img successfully.');\n              cc.loader.downloader.loadSubpackage('music', function (err) {\n                if (err) {\n                    console.log('load subpackage failed.');\n                    return console.error(err);\n                  }\n                  cc.find(\"Canvas\").getComponent(\"loading\").loadOver = true;\n                  console.log('load music successfully.');\n                });\n            });\n\n    },\n\n});\n"]}