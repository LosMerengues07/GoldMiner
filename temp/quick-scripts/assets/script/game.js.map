{"version":3,"sources":["game.js"],"names":["cc","Class","extends","Component","properties","draw","Graphics","player1","Node","base","hook","moneyLabel1","Label","add1","levelLabel","money1","target","countDown","powerLogo","onLoad","director","getCollisionManager","enabledDebugDraw","enabled","start","broadcostTimes","schedule","doCountdownTime","Global","currentMoney","targets","currentLevel","string","console","log","fire1","find","getComponent","fires","num","betterDiamonds","powers","luckys","stoneBooks","loadScene","loseMoney","update","dt","clear","startPos","convertToWorldSpaceAR","v2","endPos","lineWidth","moveTo","x","y","lineTo","stroke","opacity"],"mappings":"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","file":"game.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        draw: cc.Graphics,\r\n        player1: cc.Node,\r\n        base: cc.Node,\r\n        hook: cc.Node,\r\n        moneyLabel1: cc.Label,\r\n        add1: cc.Label,\r\n        levelLabel: cc.Label,\r\n        money1: 0,\r\n        target: 0,\r\n        countDown: cc.Label,\r\n        powerLogo: cc.Node,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        cc.director.getCollisionManager().enabledDebugDraw = false;\r\n        cc.director.getCollisionManager().enabled=true;\r\n        //this.schedule(this.doCountdownTime,1);\r\n\r\n    },\r\n\r\n    start () {\r\n        this.broadcostTimes = 30;\r\n        this.schedule(this.doCountdownTime,1);\r\n        this.money1 = Global.currentMoney; \r\n        this.target = Global.targets[Global.currentLevel-1];\r\n        this.levelLabel.string = \"Level \" + Global.currentLevel + \"\\nTarget: $\"+this.target;\r\n    },\r\n\r\n    //倒计时\r\n    doCountdownTime(){\r\n    if (this.broadcostTimes >= 0 ) {\r\n        this.countDown.string = \"-\"+this.broadcostTimes+\"s\";\r\n        this.broadcostTimes -= 1;\r\n        if(this.broadcostTimes == 0){\r\n            if(this.money1>=this.target){\r\n                console.log(\"You win! Next Level!\");\r\n                let fire1 = cc.find(\"Canvas/fire1\").getComponent(\"fire1\");\r\n                Global.currentMoney = this.money1;\r\n                Global.fires = fire1.num;\r\n                Global.betterDiamonds = 0;\r\n                Global.powers = 0;\r\n                Global.luckys = 0;\r\n                Global.stoneBooks = 0;\r\n                if(Global.currentLevel == 5){\r\n                    cc.director.loadScene(\"pass\");\r\n                }else{\r\n                    Global.currentLevel++;\r\n                    cc.director.loadScene(\"next\"); \r\n                }\r\n\r\n            }else{\r\n                Global.loseMoney = this.money1;\r\n                cc.director.loadScene(\"lose\");\r\n            }\r\n        }\r\n    }\r\n},\r\n\r\n    update (dt) {\r\n        this.draw.clear();\r\n        let startPos = this.base.convertToWorldSpaceAR(cc.v2(0, 1));\r\n        let endPos = this.hook.convertToWorldSpaceAR(cc.v2(-0.1, -25.3));\r\n        this.draw.lineWidth = 4.5;\r\n        this.draw.moveTo(startPos.x,startPos.y);\r\n        this.draw.lineTo(endPos.x, endPos.y);\r\n        this.draw.stroke();\r\n        \r\n        this.moneyLabel1.string = \"$ \" + this.money1;\r\n        if(Global.powers>0){\r\n            this.powerLogo.opacity = 255;\r\n        }else{\r\n            this.powerLogo.opacity = 0;\r\n        }\r\n    },\r\n});\r\n"]}