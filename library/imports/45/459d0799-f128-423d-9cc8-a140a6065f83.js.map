{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\hook.js"],"names":["cc","Class","extends","Component","properties","moveSpeed","down","flag","occupied","downPlaying","item","Node","bigGold","default","type","AudioClip","getDown","goods","onKeyDown","event","keyCode","macro","KEY","onCollisionEnter","other","self","node","_name","audioEngine","play","onLoad","animationComponent","getComponent","Animation","initX","x","initY","y","playing","systemEvent","on","SystemEvent","EventType","KEY_DOWN","start","update","dt","stop","theta","getRotation","Math","PI","sin","cos","Global","powers"],"mappings":"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","file":"hook.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        moveSpeed: 6,\r\n        down: false,\r\n        flag: 0,\r\n        occupied: false,\r\n        downPlaying: false,\r\n        item: cc.Node,\r\n        bigGold: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        getDown: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        goods: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n    },\r\n\r\n    onKeyDown (event) {\r\n        // set a flag when key pressed\r\n        switch(event.keyCode) {\r\n            case cc.macro.KEY.down:\r\n                this.down = true;\r\n                break;\r\n        }\r\n    },\r\n\r\n    onCollisionEnter:function(other,self){\r\n        if(!this.occupied){\r\n            if(other.node._name == \"bigGold\" || other.node._name == \"treasure\"){\r\n                cc.audioEngine.play(this.bigGold, false, 1);\r\n            }else if(other.node._name == \"midGold\" || other.node._name == \"pocket\" || other.node._name == \"diamond\" || other.node._name == \"diamondPig\"){\r\n                cc.audioEngine.play(this.goods, false, 1);\r\n            }\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function(){\r\n        this.animationComponent = this.getComponent(cc.Animation);\r\n        this.initX = this.node.x;\r\n        this.initY = this.node.y;\r\n        this.animationComponent.play(\"hookRotation\");\r\n        this.playing = true;\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update (dt) {\r\n        if(this.down && this.flag!=2){\r\n            if(!this.downPlaying){\r\n                this.downPlaying = true ;\r\n                cc.audioEngine.play(this.getDown, false, 1);\r\n            }\r\n\r\n            this.flag = 1;\r\n            this.playing = false;\r\n            this.animationComponent.stop(\"hookRotation\");\r\n            this.animationComponent.stop(\"hookRotation2\");\r\n            this.animationComponent.stop(\"hookRotation3\");\r\n            let theta = this.node.getRotation()*(Math.PI / 180);\r\n            this.node.x -= this.moveSpeed*Math.sin(theta);\r\n            this.node.y -= this.moveSpeed*Math.cos(theta);\r\n\r\n            if((this.node.x<-450) || (this.node.x>450) || (this.node.y<-240)){\r\n                this.down = false;\r\n                this.occupied = true;\r\n            }\r\n        }else {\r\n            if(this.node.y<this.initY){\r\n                this.flag = 2;\r\n                this.playing = false;\r\n                let theta = this.node.getRotation()*(Math.PI / 180);\r\n                if(Global.powers>0){\r\n                    if(this.moveSpeed==6){\r\n                        this.node.x += this.moveSpeed*Math.sin(theta);\r\n                        this.node.y += this.moveSpeed*Math.cos(theta);\r\n                    }else{\r\n                        this.node.x += 5*Math.sin(theta);\r\n                        this.node.y += 5*Math.cos(theta);\r\n                    }\r\n                }else{\r\n                    this.node.x += this.moveSpeed*Math.sin(theta);\r\n                    this.node.y += this.moveSpeed*Math.cos(theta);\r\n                }\r\n                this.down = false;\r\n            }else{\r\n                this.downPlaying = false ;\r\n                this.flag = 3;\r\n                this.node.x = this.initX;\r\n                this.node.y = this.initY;\r\n                this.moveSpeed = 6;\r\n                this.item = null;\r\n                if(!this.playing){\r\n                    this.occupied = false;\r\n                    if(this.node.getRotation()>30){\r\n                        this.animationComponent.play(\"hookRotation2\");\r\n                    }else if(this.node.getRotation()<-30){\r\n                        this.animationComponent.play(\"hookRotation3\");\r\n                    }else{\r\n                        this.animationComponent.play(\"hookRotation\");\r\n                    }\r\n                    this.playing = true;\r\n                }\r\n            }\r\n        } \r\n    },\r\n});\r\n"]}