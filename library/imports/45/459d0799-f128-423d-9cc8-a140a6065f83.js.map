{"version":3,"sources":["../../../../assets/script/assets/script/hook.js"],"names":["cc","Class","extends","Component","properties","moveSpeed","down","flag","occupied","item","Node","onKeyDown","event","keyCode","macro","KEY","onLoad","animationComponent","getComponent","Animation","initX","node","x","initY","y","play","playing","systemEvent","on","SystemEvent","EventType","KEY_DOWN","start","update","dt","stop","theta","getRotation","Math","PI","sin","cos","Global","powers"],"mappings":"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","file":"hook.js","sourceRoot":"../../../../assets/script","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        moveSpeed: 6,\n        down: false,\n        flag: 0,\n        occupied: false,\n        item: cc.Node,\n    },\n\n    onKeyDown (event) {\n        // set a flag when key pressed\n        switch(event.keyCode) {\n            case cc.macro.KEY.down:\n                this.down = true;\n                break;\n        }\n    },\n\n/*\n    onKeyUp (event) {\n        // unset a flag when key released\n        switch(event.keyCode) {\n            case cc.macro.KEY.a:\n                this.accLeft = false;\n                break;\n            case cc.macro.KEY.d:\n                this.accRight = false;\n                break;\n        }\n    },\n*/\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad: function(){\n        this.animationComponent = this.getComponent(cc.Animation);\n        this.initX = this.node.x;\n        this.initY = this.node.y;\n        this.animationComponent.play(\"hookRotation\");\n        this.playing = true;\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n\n    },\n\n    start () {\n\n    },\n\n    update (dt) {\n        if(this.down && this.flag!=2){\n            this.flag = 1;\n            this.playing = false;\n            this.animationComponent.stop(\"hookRotation\");\n            this.animationComponent.stop(\"hookRotation2\");\n            this.animationComponent.stop(\"hookRotation3\");\n            let theta = this.node.getRotation()*(Math.PI / 180);\n            this.node.x -= this.moveSpeed*Math.sin(theta);\n            this.node.y -= this.moveSpeed*Math.cos(theta);\n\n            if((this.node.x<-450) || (this.node.x>450) || (this.node.y<-240)){\n                this.down = false;\n                this.occupied = true;\n            }\n        }else {\n            if(this.node.y<this.initY){\n                this.flag = 2;\n                this.playing = false;\n                let theta = this.node.getRotation()*(Math.PI / 180);\n                if(Global.powers>0){\n                    if(this.moveSpeed==6){\n                        this.node.x += this.moveSpeed*Math.sin(theta);\n                        this.node.y += this.moveSpeed*Math.cos(theta);\n                    }else{\n                        this.node.x += 5*Math.sin(theta);\n                        this.node.y += 5*Math.cos(theta);\n                    }\n                }else{\n                    this.node.x += this.moveSpeed*Math.sin(theta);\n                    this.node.y += this.moveSpeed*Math.cos(theta);\n                }\n                this.down = false;\n            }else{\n                this.flag = 3;\n                this.node.x = this.initX;\n                this.node.y = this.initY;\n                this.moveSpeed = 6;\n                this.item = null;\n                if(!this.playing){\n                    this.occupied = false;\n                    if(this.node.getRotation()>30){\n                        this.animationComponent.play(\"hookRotation2\");\n                    }else if(this.node.getRotation()<-30){\n                        this.animationComponent.play(\"hookRotation3\");\n                    }else{\n                        this.animationComponent.play(\"hookRotation\");\n                    }\n                    this.playing = true;\n                }\n            }\n        } \n    },\n});\n"]}