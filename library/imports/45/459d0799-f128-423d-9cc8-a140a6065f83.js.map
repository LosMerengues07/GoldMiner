{"version":3,"sources":["../../../../assets/script/assets/script/hook.js"],"names":["cc","Class","extends","Component","properties","moveSpeed","down","flag","occupied","downPlaying","item","Node","bigGold","default","type","AudioClip","getDown","goods","onKeyDown","event","keyCode","macro","KEY","onCollisionEnter","other","self","node","_name","audioEngine","play","console","log","onLoad","animationComponent","getComponent","Animation","initX","x","initY","y","playing","systemEvent","on","SystemEvent","EventType","KEY_DOWN","start","update","dt","stop","theta","getRotation","Math","PI","sin","cos","Global","powers"],"mappings":"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","file":"hook.js","sourceRoot":"../../../../assets/script","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        moveSpeed: 6,\n        down: false,\n        flag: 0,\n        occupied: false,\n        downPlaying: false,\n        item: cc.Node,\n        bigGold: {\n            default: null,\n            type: cc.AudioClip\n        },\n        getDown: {\n            default: null,\n            type: cc.AudioClip\n        },\n        goods: {\n            default: null,\n            type: cc.AudioClip\n        },\n    },\n\n    onKeyDown (event) {\n        // set a flag when key pressed\n        switch(event.keyCode) {\n            case cc.macro.KEY.down:\n                this.down = true;\n                break;\n        }\n    },\n\n    onCollisionEnter:function(other,self){\n        if(other.node._name == \"bigGold\" || other.node._name == \"treasure\"){\n            cc.audioEngine.play(this.bigGold, false, 1);\n        }else if(other.node._name == \"midGold\" || other.node._name == \"pocket\"){\n            cc.audioEngine.play(this.goods, false, 1);\n            console.log(1234);\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad: function(){\n        this.animationComponent = this.getComponent(cc.Animation);\n        this.initX = this.node.x;\n        this.initY = this.node.y;\n        this.animationComponent.play(\"hookRotation\");\n        this.playing = true;\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n\n    },\n\n    start () {\n\n    },\n\n    update (dt) {\n        if(this.down && this.flag!=2){\n            if(!this.downPlaying){\n                this.downPlaying = true ;\n                cc.audioEngine.play(this.getDown, false, 1);\n            }\n\n            this.flag = 1;\n            this.playing = false;\n            this.animationComponent.stop(\"hookRotation\");\n            this.animationComponent.stop(\"hookRotation2\");\n            this.animationComponent.stop(\"hookRotation3\");\n            let theta = this.node.getRotation()*(Math.PI / 180);\n            this.node.x -= this.moveSpeed*Math.sin(theta);\n            this.node.y -= this.moveSpeed*Math.cos(theta);\n\n            if((this.node.x<-450) || (this.node.x>450) || (this.node.y<-240)){\n                this.down = false;\n                this.occupied = true;\n            }\n        }else {\n            if(this.node.y<this.initY){\n                this.flag = 2;\n                this.playing = false;\n                let theta = this.node.getRotation()*(Math.PI / 180);\n                if(Global.powers>0){\n                    if(this.moveSpeed==6){\n                        this.node.x += this.moveSpeed*Math.sin(theta);\n                        this.node.y += this.moveSpeed*Math.cos(theta);\n                    }else{\n                        this.node.x += 5*Math.sin(theta);\n                        this.node.y += 5*Math.cos(theta);\n                    }\n                }else{\n                    this.node.x += this.moveSpeed*Math.sin(theta);\n                    this.node.y += this.moveSpeed*Math.cos(theta);\n                }\n                this.down = false;\n            }else{\n                this.downPlaying = false ;\n                this.flag = 3;\n                this.node.x = this.initX;\n                this.node.y = this.initY;\n                this.moveSpeed = 6;\n                this.item = null;\n                if(!this.playing){\n                    this.occupied = false;\n                    if(this.node.getRotation()>30){\n                        this.animationComponent.play(\"hookRotation2\");\n                    }else if(this.node.getRotation()<-30){\n                        this.animationComponent.play(\"hookRotation3\");\n                    }else{\n                        this.animationComponent.play(\"hookRotation\");\n                    }\n                    this.playing = true;\n                }\n            }\n        } \n    },\n});\n"]}