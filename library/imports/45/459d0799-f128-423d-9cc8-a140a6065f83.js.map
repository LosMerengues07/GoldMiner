{"version":3,"sources":["../../../../assets/script/assets/script/hook.js"],"names":["cc","Class","extends","Component","properties","moveSpeed","down","goDown","onKeyDown","event","keyCode","macro","KEY","onLoad","animationComponent","getComponent","Animation","initX","node","x","initY","y","play","playing","systemEvent","on","SystemEvent","EventType","KEY_DOWN","start","update","dt","stop","theta","getRotation","Math","PI","sin","cos","abs"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,mBAAW,CADH;AAERC,cAAM;AAFE,KAHP;;AAQLC,YAAQ,kBAAY;AAChB;AACA;AACA;AACA;AACA;AACA;AACH,KAfI;;AAiBLC,aAjBK,qBAiBMC,KAjBN,EAiBa;AACd;AACA,gBAAOA,MAAMC,OAAb;AACI,iBAAKV,GAAGW,KAAH,CAASC,GAAT,CAAaN,IAAlB;AACI,qBAAKA,IAAL,GAAY,IAAZ;AACA;AAHR;AAKH,KAxBI;;;AA2BT;;;;;;;;;;;;;;AAcI;;AAEAO,YAAQ,kBAAU;AACd,YAAIC,qBAAqB,KAAKC,YAAL,CAAkBf,GAAGgB,SAArB,CAAzB;AACA,aAAKC,KAAL,GAAa,KAAKC,IAAL,CAAUC,CAAvB;AACA,aAAKC,KAAL,GAAa,KAAKF,IAAL,CAAUG,CAAvB;AACAP,2BAAmBQ,IAAnB,CAAwB,cAAxB;AACA,aAAKC,OAAL,GAAe,IAAf;AACAvB,WAAGwB,WAAH,CAAeC,EAAf,CAAkBzB,GAAG0B,WAAH,CAAeC,SAAf,CAAyBC,QAA3C,EAAqD,KAAKpB,SAA1D,EAAqE,IAArE;AAEH,KAnDI;;AAqDLqB,SArDK,mBAqDI,CAER,CAvDI;AAyDLC,UAzDK,kBAyDGC,EAzDH,EAyDO;AACR,YAAIjB,qBAAqB,KAAKC,YAAL,CAAkBf,GAAGgB,SAArB,CAAzB;AACA;;AAEA,YAAG,KAAKV,IAAR,EAAa;AACT,iBAAKiB,OAAL,GAAe,KAAf;AACAT,+BAAmBkB,IAAnB,CAAwB,cAAxB;AACA,gBAAIC,QAAQ,KAAKf,IAAL,CAAUgB,WAAV,MAAyBC,KAAKC,EAAL,GAAU,GAAnC,CAAZ;AACA,iBAAKlB,IAAL,CAAUC,CAAV,IAAe,KAAKd,SAAL,GAAe8B,KAAKE,GAAL,CAASJ,KAAT,CAA9B;AACA,iBAAKf,IAAL,CAAUG,CAAV,IAAe,KAAKhB,SAAL,GAAe8B,KAAKG,GAAL,CAASL,KAAT,CAA9B;AACA,gBAAI,KAAKf,IAAL,CAAUC,CAAV,GAAY,CAAC,GAAd,IAAuB,KAAKD,IAAL,CAAUC,CAAV,GAAY,GAAnC,IAA4C,KAAKD,IAAL,CAAUG,CAAV,GAAY,CAAC,GAA5D,EAAiE;AAC7D,qBAAKf,IAAL,GAAY,KAAZ;AACH;AACJ,SATD,MASM,IAAG,CAAC,KAAKA,IAAN,IAAc6B,KAAKI,GAAL,CAAS,KAAKrB,IAAL,CAAUC,CAAV,GAAY,KAAKF,KAA1B,IAAiC,GAAlD,EAAsD;AACxD,iBAAKM,OAAL,GAAe,KAAf;AACA,gBAAIU,SAAQ,KAAKf,IAAL,CAAUgB,WAAV,MAAyBC,KAAKC,EAAL,GAAU,GAAnC,CAAZ;AACA,iBAAKlB,IAAL,CAAUC,CAAV,IAAe,KAAKd,SAAL,GAAe8B,KAAKE,GAAL,CAASJ,MAAT,CAA9B;AACA,iBAAKf,IAAL,CAAUG,CAAV,IAAe,KAAKhB,SAAL,GAAe8B,KAAKG,GAAL,CAASL,MAAT,CAA9B;AACH,SALK,MAKD;AACD,iBAAKf,IAAL,CAAUC,CAAV,GAAc,KAAKF,KAAnB;AACA,iBAAKC,IAAL,CAAUG,CAAV,GAAc,KAAKD,KAAnB;AACA,gBAAG,CAAC,KAAKG,OAAT,EAAiB;AACbT,mCAAmBQ,IAAnB,CAAwB,cAAxB;AACA,qBAAKC,OAAL,GAAe,IAAf;AACH;AACJ;AACJ;AAnFI,CAAT","file":"hook.js","sourceRoot":"../../../../assets/script","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        moveSpeed: 6,\n        down: false,\n    },\n\n    goDown: function () {\n        // 跳跃上升\n        //var jumpUp = cc.moveBy(this.jumpDuration, cc.v2(0, this.jumpHeight));\n        // 下落\n        //var jumpDown = cc.moveBy(this.jumpDuration, cc.v2(0, -this.jumpHeight));\n        // 不断重复\n        //return cc.repeatForever(cc.sequence(jumpUp, jumpDown));\n    },\n\n    onKeyDown (event) {\n        // set a flag when key pressed\n        switch(event.keyCode) {\n            case cc.macro.KEY.down:\n                this.down = true;\n                break;\n        }\n    },\n\n\n/*\n    onKeyUp (event) {\n        // unset a flag when key released\n        switch(event.keyCode) {\n            case cc.macro.KEY.a:\n                this.accLeft = false;\n                break;\n            case cc.macro.KEY.d:\n                this.accRight = false;\n                break;\n        }\n    },\n*/\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad: function(){\n        var animationComponent = this.getComponent(cc.Animation);\n        this.initX = this.node.x;\n        this.initY = this.node.y;\n        animationComponent.play(\"hookRotation\");\n        this.playing = true;\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n\n    },\n\n    start () {\n\n    },\n\n    update (dt) {\n        var animationComponent = this.getComponent(cc.Animation)\n        //console.log(this.node.getRotation());\n\n        if(this.down){\n            this.playing = false;\n            animationComponent.stop(\"hookRotation\");\n            let theta = this.node.getRotation()*(Math.PI / 180);\n            this.node.x -= this.moveSpeed*Math.sin(theta);\n            this.node.y -= this.moveSpeed*Math.cos(theta);\n            if((this.node.x<-450) || (this.node.x>450) || (this.node.y<-240)){\n                this.down = false;\n            }\n        }else if(!this.down && Math.abs(this.node.x-this.initX)>0.1){\n            this.playing = false;\n            let theta = this.node.getRotation()*(Math.PI / 180);\n            this.node.x += this.moveSpeed*Math.sin(theta);\n            this.node.y += this.moveSpeed*Math.cos(theta);\n        }else{\n            this.node.x = this.initX;\n            this.node.y = this.initY;\n            if(!this.playing){\n                animationComponent.play(\"hookRotation\");\n                this.playing = true;\n            }\n        }\n    },\n});\n"]}