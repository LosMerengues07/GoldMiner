{"version":3,"sources":["../../../../assets/script/assets/script/loading.js"],"names":["cc","Class","extends","Component","properties","load","Node","broadcostTimes","doCountdownTime","console","log","loadOver","director","loadScene","start","schedule","animationComponent","getComponent","Animation","play","loader","downloader","loadSubpackage","err","error","find"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACPC,WAASF,GAAGG,SADL;;AAGPC,cAAY;AACVC,UAAML,GAAGM,IADC;AAEVC,oBAAgB;AAFN,GAHL;;AAQP;;AAEA;AACAC,iBAXO,6BAWY;AACjB,SAAKD,cAAL,IAAuB,CAAvB;AACAE,YAAQC,GAAR,CAAY,KAAKH,cAAjB;AACA,QAAI,KAAKA,cAAL,IAAuB,CAAvB,IAA4B,KAAKI,QAArC,EAA+C;AAC7CX,SAAGY,QAAH,CAAYC,SAAZ,CAAsB,OAAtB;AACD;AACF,GAjBM;AAmBPC,OAnBO,mBAmBE;AACP,SAAKC,QAAL,CAAc,KAAKP,eAAnB,EAAoC,CAApC;AACA,QAAMQ,qBAAqB,KAAKX,IAAL,CAAUY,YAAV,CAAuBjB,GAAGkB,SAA1B,CAA3B;AACAF,uBAAmBG,IAAnB,CAAwB,SAAxB;;AAEAnB,OAAGoB,MAAH,CAAUC,UAAV,CAAqBC,cAArB,CAAoC,KAApC,EAA2C,UAAUC,GAAV,EAAe;AACxD,UAAIA,GAAJ,EAAS;AACPd,gBAAQC,GAAR,CAAY,yBAAZ;AACA,eAAOD,QAAQe,KAAR,CAAcD,GAAd,CAAP;AACD;AACDd,cAAQC,GAAR,CAAY,wBAAZ;AACAV,SAAGoB,MAAH,CAAUC,UAAV,CAAqBC,cAArB,CAAoC,OAApC,EAA6C,UAAUC,GAAV,EAAe;AAC1D,YAAIA,GAAJ,EAAS;AACPd,kBAAQC,GAAR,CAAY,yBAAZ;AACA,iBAAOD,QAAQe,KAAR,CAAcD,GAAd,CAAP;AACD;AACDvB,WAAGyB,IAAH,CAAQ,QAAR,EAAkBR,YAAlB,CAA+B,SAA/B,EAA0CN,QAA1C,GAAqD,IAArD;AACAF,gBAAQC,GAAR,CAAY,0BAAZ;AACD,OAPD;AAQD,KAdD;AAeD;AAvCM,CAAT","file":"loading.js","sourceRoot":"../../../../assets/script","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    load: cc.Node,\n    broadcostTimes: 2\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n\n  // 倒计时\n  doCountdownTime () {\n    this.broadcostTimes -= 1\n    console.log(this.broadcostTimes)\n    if (this.broadcostTimes <= 0 && this.loadOver) {\n      cc.director.loadScene('start')\n    }\n  },\n\n  start () {\n    this.schedule(this.doCountdownTime, 1)\n    const animationComponent = this.load.getComponent(cc.Animation)\n    animationComponent.play('loading')\n\n    cc.loader.downloader.loadSubpackage('img', function (err) {\n      if (err) {\n        console.log('load subpackage failed.')\n        return console.error(err)\n      }\n      console.log('load img successfully.')\n      cc.loader.downloader.loadSubpackage('music', function (err) {\n        if (err) {\n          console.log('load subpackage failed.')\n          return console.error(err)\n        }\n        cc.find('Canvas').getComponent('loading').loadOver = true\n        console.log('load music successfully.')\n      })\n    })\n  }\n\n})\n"]}