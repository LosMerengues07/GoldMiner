{"version":3,"sources":["game.js"],"names":["cc","Class","extends","Component","properties","draw","Graphics","player1","Node","base","hook","moneyLabel1","Label","add1","addFire","levelLabel","money1","power1","target","countDown","exit","powerLogo","onLoad","director","getCollisionManager","enabledDebugDraw","enabled","onTouchExit","event","loadScene","start","broadcostTimes","schedule","doCountdownTime","Global","currentMoney","powers","targets","currentLevel","string","on","EventType","TOUCH_START","console","log","fire1","find","getComponent","fires","num","betterDiamonds","luckys","stoneBooks","loseMoney","update","dt","clear","startPos","convertToWorldSpaceAR","v2","endPos","lineWidth","moveTo","x","y","lineTo","stroke","opacity"],"mappings":"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","file":"game.js","sourceRoot":"../../../../assets/script","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    draw: cc.Graphics,\n    player1: cc.Node,\n    base: cc.Node,\n    hook: cc.Node,\n    moneyLabel1: cc.Label,\n    add1: cc.Label,\n    addFire: cc.Label,\n    levelLabel: cc.Label,\n    money1: 0,\n    power1: 0,\n    target: 0,\n    countDown: cc.Label,\n    exit: cc.Node,\n    powerLogo: cc.Node\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n\n  onLoad () {\n    cc.director.getCollisionManager().enabledDebugDraw = false\n    cc.director.getCollisionManager().enabled = true\n    // this.schedule(this.doCountdownTime,1);\n  },\n  onTouchExit (event) {\n    cc.director.loadScene('start')\n  },\n\n  start () {\n    this.broadcostTimes = 30\n    this.schedule(this.doCountdownTime, 1)\n    this.money1 = Global.currentMoney\n    this.power1 = Global.powers\n    this.target = Global.targets[Global.currentLevel - 1]\n    this.levelLabel.string = 'Level ' + Global.currentLevel + '\\nTarget: $' + this.target\n    this.exit.on(cc.Node.EventType.TOUCH_START, this.onTouchExit, this)\n  },\n\n  // 倒计时\n  doCountdownTime () {\n    this.countDown.string = '-' + this.broadcostTimes + 's'\n    this.broadcostTimes -= 1\n    if (this.broadcostTimes === -1) {\n      if (this.money1 >= this.target) {\n        console.log('You win! Next Level!')\n        const fire1 = cc.find('Canvas/fire1').getComponent('fire1')\n        Global.currentMoney = this.money1\n        Global.fires = fire1.num\n        Global.betterDiamonds = 0\n        Global.powers = 0\n        Global.luckys = 0\n        Global.stoneBooks = 0\n        if (Global.currentLevel === 8) {\n          cc.director.loadScene('pass')\n        } else {\n          Global.currentLevel++\n          cc.director.loadScene('next')\n        }\n      } else {\n        Global.loseMoney = this.money1\n        console.log(Global.powers)\n        Global.powers = this.power1\n        console.log(Global.powers)\n        cc.director.loadScene('lose')\n      }\n    }\n  },\n\n  update (dt) {\n    this.draw.clear()\n    const startPos = this.base.convertToWorldSpaceAR(cc.v2(0, 1))\n    const endPos = this.hook.convertToWorldSpaceAR(cc.v2(-0.1, -25.3))\n    this.draw.lineWidth = 4.5\n    this.draw.moveTo(startPos.x, startPos.y)\n    this.draw.lineTo(endPos.x, endPos.y)\n    this.draw.stroke()\n\n    this.moneyLabel1.string = '$ ' + this.money1\n    if (Global.powers > 0) {\n      this.powerLogo.opacity = 255\n    } else {\n      this.powerLogo.opacity = 0\n    }\n  }\n})\n"]}