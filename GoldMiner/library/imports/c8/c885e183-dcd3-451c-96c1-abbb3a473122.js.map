{"version":3,"sources":["../../../../assets/script/assets/script/game.js"],"names":["cc","Class","extends","Component","properties","draw","Graphics","player1","Node","base","hook","moneyLabel1","Label","add1","addFire","levelLabel","money1","target","countDown","powerLogo","onLoad","director","getCollisionManager","enabledDebugDraw","enabled","start","broadcostTimes","schedule","doCountdownTime","Global","currentMoney","targets","currentLevel","string","console","log","fire1","find","getComponent","fires","num","betterDiamonds","powers","luckys","stoneBooks","loadScene","loseMoney","update","dt","clear","startPos","convertToWorldSpaceAR","v2","endPos","lineWidth","moveTo","x","y","lineTo","stroke","opacity"],"mappings":"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","file":"game.js","sourceRoot":"../../../../assets/script","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    draw: cc.Graphics,\n    player1: cc.Node,\n    base: cc.Node,\n    hook: cc.Node,\n    moneyLabel1: cc.Label,\n    add1: cc.Label,\n    addFire: cc.Label,\n    levelLabel: cc.Label,\n    money1: 0,\n    target: 0,\n    countDown: cc.Label,\n    powerLogo: cc.Node\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n\n  onLoad () {\n    cc.director.getCollisionManager().enabledDebugDraw = false\n    cc.director.getCollisionManager().enabled = true\n    // this.schedule(this.doCountdownTime,1);\n  },\n\n  start () {\n    this.broadcostTimes = 30\n    this.schedule(this.doCountdownTime, 1)\n    this.money1 = Global.currentMoney\n    this.target = Global.targets[Global.currentLevel - 1]\n    this.levelLabel.string = 'Level ' + Global.currentLevel + '\\nTarget: $' + this.target\n  },\n\n  // 倒计时\n  doCountdownTime () {\n    this.countDown.string = '-' + this.broadcostTimes + 's'\n    this.broadcostTimes -= 1\n    if (this.broadcostTimes === -1) {\n      if (this.money1 >= this.target) {\n        console.log('You win! Next Level!')\n        const fire1 = cc.find('Canvas/fire1').getComponent('fire1')\n        Global.currentMoney = this.money1\n        Global.fires = fire1.num\n        Global.betterDiamonds = 0\n        Global.powers = 0\n        Global.luckys = 0\n        Global.stoneBooks = 0\n        if (Global.currentLevel === 8) {\n          cc.director.loadScene('pass')\n        } else {\n          Global.currentLevel++\n          cc.director.loadScene('next')\n        }\n      } else {\n        Global.loseMoney = this.money1\n        cc.director.loadScene('lose')\n      }\n    }\n  },\n\n  update (dt) {\n    this.draw.clear()\n    const startPos = this.base.convertToWorldSpaceAR(cc.v2(0, 1))\n    const endPos = this.hook.convertToWorldSpaceAR(cc.v2(-0.1, -25.3))\n    this.draw.lineWidth = 4.5\n    this.draw.moveTo(startPos.x, startPos.y)\n    this.draw.lineTo(endPos.x, endPos.y)\n    this.draw.stroke()\n\n    this.moneyLabel1.string = '$ ' + this.money1\n    if (Global.powers > 0) {\n      this.powerLogo.opacity = 255\n    } else {\n      this.powerLogo.opacity = 0\n    }\n  }\n})\n"]}