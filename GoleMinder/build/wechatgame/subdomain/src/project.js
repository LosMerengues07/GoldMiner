window.__require=function e(t,n,r){function a(i,c){if(!n[i]){if(!t[i]){var s=i.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+i+"'")}}var u=n[i]={exports:{}};t[i][0].call(u.exports,function(e){return a(t[i][1][e]||e)},u,u.exports,e,t,n,r)}return n[i].exports}for(var o="function"==typeof __require&&__require,i=0;i<r.length;i++)a(r[i]);return a}({rank:[function(e,t,n){"use strict";cc._RF.push(t,"bbfadI3JgpGQ4wQp6m1UBig","rank"),cc.Class({extends:cc.Component,properties:{line1:cc.Node,line2:cc.Node,line3:cc.Node,line4:cc.Node,line5:cc.Node},strClamp:function(e,t,n){n=null==n?"...":n,t*=2;for(var r=function(e){for(var t=[],n=0,r=0,a=0;a<e.length;){var o=a;if(65039!=(n=e.charCodeAt(a++)))if(r){var i=65536+(r-55296<<10)+(n-56320);t.push({v:i,pos:o}),r=0}else 55296<=n&&n<=56319?r=n:t.push({v:n,pos:o})}return t}(e),a=0,o=0,i=0;i<r.length;++i){var c=1;if(r[i].v>=128&&(c=2),a+c>t)break;o=i,a+=c}if(r.length-1==o)return e;var s=n?1:0;return e.substring(0,r[o-s].pos+1)+n},rankRecords:function(){this.data.sort(function(e,t){return 0===t.KVDataList.length?-1:0===e.KVDataList.length?1:parseInt(e.KVDataList[0].value)>=parseInt(t.KVDataList[0].value)?-1:1})},start:function(){var e=this;"undefined"!=typeof wx&&(this.lines=cc.find("Canvas").children,wx.onMessage(function(t){switch(t.message){case"Show":wx.getFriendCloudStorage({keyList:["score"],success:function(t){e.data=t.data,e.rankRecords();var n=e.data.length;if(console.log(n),n>5)for(var r=function(t){e.lines[t+1].opacity=255,cc.loader.load({url:e.data[t].avatarUrl,type:"png"},function(n,r){n?console.error(n):e.lines[t+1].children[1].getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(r)}),e.lines[t+1].children[2].getComponent(cc.Label).string=e.strClamp(e.data[t].nickname,8,"\u2026"),e.lines[t+1].children[3].getComponent(cc.Label).string=e.data[t].KVDataList[0].value},a=0;a<5;a++)r(a);else{var o=function(t){e.lines[t+1].opacity=255,cc.loader.load({url:e.data[t].avatarUrl,type:"png"},function(n,r){n?console.error(n):e.lines[t+1].children[1].getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(r)}),e.lines[t+1].children[2].getComponent(cc.Label).string=e.strClamp(e.data[t].nickname,8,"\u2026"),e.lines[t+1].children[3].getComponent(cc.Label).string=e.data[t].KVDataList[0].value};for(a=0;a<n;a++)o(a)}}});break;case"UpdateScore":wx.getUserCloudStorage({keyList:["score"],success:function(e){if(0===e.KVDataList.length||parseInt(t.score)>parseInt(e.KVDataList[0].value)){var n=[];n.push({key:"score",value:t.score}),console.log("set score"),wx.setUserCloudStorage({KVDataList:n})}}})}}))}}),cc._RF.pop()},{}]},{},["rank"]);